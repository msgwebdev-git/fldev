# üì∏ –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –≥–∞–ª–µ—Ä–µ–∏

## ‚úÖ –ß—Ç–æ —É–∂–µ –≥–æ—Ç–æ–≤–æ

1. ‚úÖ –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Å–∂–∞—Ç–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (`compress-images.ts`)
2. ‚úÖ –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤ Supabase (`upload-to-supabase.ts`)
3. ‚úÖ –°–∫—Ä–∏–ø—Ç –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ë–î (`sync-gallery-db.ts`)
4. ‚úÖ SQL —Å—Ö–µ–º–∞ –¥–ª—è Supabase (`supabase-gallery.sql`)
5. ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≥–∞–ª–µ—Ä–µ–∏

## üöÄ –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### –®–∞–≥ 1: –°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É –≤ Supabase

1. –û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard ‚Üí SQL Editor
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `supabase-gallery.sql`
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ SQL —Å–∫—Ä–∏–ø—Ç
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ `gallery` —Å–æ–∑–¥–∞–Ω–∞

### –®–∞–≥ 2: –ü–æ–¥–≥–æ—Ç–æ–≤—å—Ç–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏

–ü–æ–º–µ—Å—Ç–∏—Ç–µ –≤—Å–µ —Ñ–æ—Ç–æ 2022 –≥–æ–¥–∞ (207 —à—Ç—É–∫) –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é –ø–∞–ø–∫—É:

```bash
# –ù–∞–ø—Ä–∏–º–µ—Ä:
/Users/username/festival-photos/2022/
  ‚îú‚îÄ‚îÄ IMG_001.jpg
  ‚îú‚îÄ‚îÄ IMG_002.jpg
  ‚îî‚îÄ‚îÄ ... (–≤—Å–µ–≥–æ 207 —Ñ–æ—Ç–æ)
```

### –®–∞–≥ 3: –°–∂–∞—Ç–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —Å–∂–∞—Ç–∏—è:

```bash
npm run compress-images /Users/username/festival-photos/2022 ./compressed 2022
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:**
- –°–æ–∑–¥–∞—Å—Ç—Å—è –ø–∞–ø–∫–∞ `./compressed/2022/`
- –í `thumbnails/` –±—É–¥—É—Ç –º–∏–Ω–∏–∞—Ç—é—Ä—ã 400x300 WebP (~30-50KB –∫–∞–∂–¥–∞—è)
- –í `full/` –±—É–¥—É—Ç –ø–æ–ª–Ω–æ—Ä–∞–∑–º–µ—Ä–Ω—ã–µ 1920x1440 WebP (~200-400KB –∫–∞–∂–¥–∞—è)
- –í—ã —É–≤–∏–¥–∏—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–∂–∞—Ç–∏—è

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```
‚úÖ –°–∂–∞—Ç–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!
üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
   –û—Ä–∏–≥–∏–Ω–∞–ª: 130.00 MB
   Thumbnails: 10.50 MB
   Full: 65.00 MB
   –í—Å–µ–≥–æ —Å–∂–∞—Ç–æ: 75.50 MB
   –≠–∫–æ–Ω–æ–º–∏—è: 41.9%
```

### –®–∞–≥ 4: –ó–∞–≥—Ä—É–∑–∫–∞ –≤ Supabase Storage

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `.env.local` –µ—Å—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:

```env
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (–¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∑–∞–≥—Ä—É–∑–∫–∏):
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
```

–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ:

```bash
npm run upload-gallery ./compressed 2022
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:**
- –°–æ–∑–¥–∞—Å—Ç—Å—è bucket `gallery` (–µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç)
- –ó–∞–≥—Ä—É–∑—è—Ç—Å—è –≤—Å–µ thumbnails –≤ `2022/thumbnails/`
- –ó–∞–≥—Ä—É–∑—è—Ç—Å—è –≤—Å–µ full –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ `2022/full/`
- –í—ã —É–≤–∏–¥–∏—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å –∑–∞–≥—Ä—É–∑–∫–∏

### –®–∞–≥ 5: –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

–°–æ–∑–¥–∞–π—Ç–µ –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ `gallery`:

```bash
npm run sync-gallery-db 2022
```

**–ß—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç:**
- –°–∫—Ä–∏–ø—Ç –ø—Ä–æ—Å–∫–∞–Ω–∏—Ä—É–µ—Ç Supabase Storage
- –°–æ–∑–¥–∞—Å—Ç –∑–∞–ø–∏—Å–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ `gallery` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–æ—Ç–æ
- –ü—Ä–æ–ø—É—Å—Ç–∏—Ç —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏

### –®–∞–≥ 6: –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–æ–ª–∏—Ç–∏–∫–∏ Supabase Storage

1. –û—Ç–∫—Ä–æ–π—Ç–µ Supabase Dashboard ‚Üí Storage ‚Üí Policies
2. –î–ª—è bucket `gallery` —Å–æ–∑–¥–∞–π—Ç–µ –ø–æ–ª–∏—Ç–∏–∫—É –ø—É–±–ª–∏—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞:

```sql
-- –†–∞–∑—Ä–µ—à–∏—Ç—å –≤—Å–µ–º —á–∏—Ç–∞—Ç—å –∏–∑ gallery bucket
CREATE POLICY "Public Read Access"
ON storage.objects FOR SELECT
USING (bucket_id = 'gallery');
```

### –®–∞–≥ 7: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä: `npm run dev`
2. –û—Ç–∫—Ä–æ–π—Ç–µ –≥–∞–ª–µ—Ä–µ—é: `http://localhost:3000/gallery`
3. –í—ã–±–µ—Ä–∏—Ç–µ 2022 –≥–æ–¥
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤—Å–µ —Ñ–æ—Ç–æ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤ Supabase

### Storage (gallery bucket):
```
gallery/
‚îî‚îÄ‚îÄ 2022/
    ‚îú‚îÄ‚îÄ thumbnails/
    ‚îÇ   ‚îú‚îÄ‚îÄ IMG_001.webp
    ‚îÇ   ‚îú‚îÄ‚îÄ IMG_002.webp
    ‚îÇ   ‚îî‚îÄ‚îÄ ... (207 —Ñ–∞–π–ª–æ–≤)
    ‚îî‚îÄ‚îÄ full/
        ‚îú‚îÄ‚îÄ IMG_001.webp
        ‚îú‚îÄ‚îÄ IMG_002.webp
        ‚îî‚îÄ‚îÄ ... (207 —Ñ–∞–π–ª–æ–≤)
```

### Database (gallery table):
```
id | year | filename | alt_text                  | display_order | width | height
---+------+----------+---------------------------+---------------+-------+--------
1  | 2022 | IMG_001  | Festival Lupilor 2022...  | 1             | 1920  | 1440
2  | 2022 | IMG_002  | Festival Lupilor 2022...  | 2             | 1920  | 1440
... (207 –∑–∞–ø–∏—Å–µ–π)
```

## üîÑ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ –¥—Ä—É–≥–∏—Ö –≥–æ–¥–æ–≤

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ñ–æ—Ç–æ 2023, 2024 –∏ –¥—Ä—É–≥–∏—Ö –≥–æ–¥–æ–≤ –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ —à–∞–≥–∏ 2-5:

```bash
# 2023 –≥–æ–¥
npm run compress-images /path/to/2023-photos ./compressed 2023
npm run upload-gallery ./compressed 2023
npm run sync-gallery-db 2023

# 2024 –≥–æ–¥
npm run compress-images /path/to/2024-photos ./compressed 2024
npm run upload-gallery ./compressed 2024
npm run sync-gallery-db 2024
```

## ‚ö° –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- **Thumbnails** –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –¥–ª—è –≥–∞–ª–µ—Ä–µ–∏ (~10MB –¥–ª—è 207 —Ñ–æ—Ç–æ)
- **Full** –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ —Ñ–æ—Ç–æ
- **–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** (lazy loading) –¥–ª—è thumbnails
- **WebP —Ñ–æ—Ä–º–∞—Ç** –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —Å–∂–∞—Ç–∏—è

### –û–∂–∏–¥–∞–µ–º–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏:
- –ü–µ—Ä–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã: ~2-3 —Å–µ–∫—É–Ω–¥—ã (thumbnails)
- –û—Ç–∫—Ä—ã—Ç–∏–µ lightbox: ~0.5-1 —Å–µ–∫—É–Ω–¥–∞ (full image)

## üõ†Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≥–∞–ª–µ—Ä–µ–µ–π

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—è–¥–∫–∞ —Ñ–æ—Ç–æ:

```sql
UPDATE gallery
SET display_order = 999
WHERE year = '2022' AND filename = 'IMG_050';
```

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è:

```sql
UPDATE gallery
SET alt_text = '–ì–ª–∞–≤–Ω–∞—è —Å—Ü–µ–Ω–∞ —Ñ–µ—Å—Ç–∏–≤–∞–ª—è'
WHERE year = '2022' AND filename = 'IMG_001';
```

### –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ:

```sql
-- –£–¥–∞–ª–∏—Ç—å –∏–∑ –ë–î
DELETE FROM gallery WHERE year = '2022' AND filename = 'IMG_001';

-- –£–¥–∞–ª–∏—Ç—å –∏–∑ Storage (—á–µ—Ä–µ–∑ Dashboard –∏–ª–∏ API)
```

## üìù –§–∞–π–ª—ã –∏ —Å–∫—Ä–∏–ø—Ç—ã

- `scripts/compress-images.ts` - –°–∂–∞—Ç–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
- `scripts/upload-to-supabase.ts` - –ó–∞–≥—Ä—É–∑–∫–∞ –≤ Storage
- `scripts/sync-gallery-db.ts` - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –ë–î
- `scripts/README.md` - –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∫—Ä–∏–ø—Ç–æ–≤
- `supabase-gallery.sql` - SQL —Å—Ö–µ–º–∞
- `src/app/[locale]/gallery/page.tsx` - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≥–∞–ª–µ—Ä–µ–∏

## ‚ùì FAQ

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å JPG –≤–º–µ—Å—Ç–æ WebP?**
A: –î–∞, –∏–∑–º–µ–Ω–∏—Ç–µ —Ñ–æ—Ä–º–∞—Ç –≤ `compress-images.ts`, –Ω–æ WebP –¥–∞–µ—Ç –ª—É—á—à–µ–µ —Å–∂–∞—Ç–∏–µ.

**Q: –ß—Ç–æ –¥–µ–ª–∞—Ç—å, –µ—Å–ª–∏ —Ñ–æ—Ç–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è?**
A: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
1. –°–æ–∑–¥–∞–Ω –ª–∏ bucket `gallery` –≤ Supabase Storage
2. –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ª–∏ –ø–æ–ª–∏—Ç–∏–∫–∏ –ø—É–±–ª–∏—á–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
3. –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ª–∏ URLs –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏–∑–º–µ–Ω–∏—Ç—å —Ä–∞–∑–º–µ—Ä thumbnails?**
A: –î–∞, –≤ `compress-images.ts` –∏–∑–º–µ–Ω–∏—Ç–µ `thumbnailWidth` –∏ `thumbnailHeight`.

**Q: –°–∫–æ–ª—å–∫–æ —ç—Ç–æ –±—É–¥–µ—Ç —Å—Ç–æ–∏—Ç—å?**
A: Supabase Free Plan:
- 1GB Storage (—Ö–≤–∞—Ç–∏—Ç –Ω–∞ ~1500 —Ñ–æ—Ç–æ –≤ –≤–∞—à–µ–º —Ñ–æ—Ä–º–∞—Ç–µ)
- 2GB bandwidth/–º–µ—Å—è—Ü
- –î–ª—è –±–æ–ª—å—à–µ–≥–æ –æ–±—ä–µ–º–∞ - –ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω ($25/–º–µ—Å –∑–∞ 100GB)

## üéâ –ì–æ—Ç–æ–≤–æ!

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤ –≤–∞—à–∞ –≥–∞–ª–µ—Ä–µ—è –±—É–¥–µ—Ç:
- ‚ö° –ë—ã—Å—Ç—Ä–æ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è
- üì± –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–π –¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- üñºÔ∏è –° –∫—Ä–∞—Å–∏–≤—ã–º lightbox –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
- üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ–π (RLS –≤ Supabase)
- üí∞ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ø–æ —Ç—Ä–∞—Ñ–∏–∫—É
